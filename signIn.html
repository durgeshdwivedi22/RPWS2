<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="signIn.css">
</head>

<body>

    <div class="container" id="container">

        <!-- Sign Up Form -->
        <div class="form-container sign-up">
            <form id="signUpForm">
                <h1>Create Account</h1>
                <div class="social-icons">
                    <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div>
                <span>or use your email for registration</span>
                <input type="email" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="button" id="register">Sign Up</button>
            </form>
        </div>

        <!-- Sign In Form -->
        <div class="form-container sign-in">
            <form id="signInForm">
                <h1>Sign In</h1>
                <div class="social-icons">
                    <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div>
                <span>or use your email and password</span>
                <input type="email" id="login_email" placeholder="Email" required>
                <input type="password" id="login_password" placeholder="Password" required>
                <button type="button" id="login">Sign In</button>
                <button type="button" id="logout" style="display:none;">Logout</button>
            </form>
        </div>

        <!-- Toggle Panels -->
        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel toggle-left">
                    <h1>Welcome Back!</h1>
                    <p>Enter your personal details to use all of site features</p>
                    <button type="button" id="showSignIn">Sign In</button>
                </div>
                <div class="toggle-panel toggle-right">
                    <h1>Welcome, Friend!</h1>
                    <p>Enter your personal details to use all of site features</p>
                    <button type="button" id="showSignUp">Sign Up</button>
                </div>
            </div>
        </div>

    </div>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB4Z71YW8OGtcsh-tiazaqYC7BS05pTxi4",
            authDomain: "shinerweb-auth.firebaseapp.com",
            projectId: "shinerweb-auth",
            storageBucket: "shinerweb-auth.appspot.com",
            messagingSenderId: "487776642853",
            appId: "1:487776642853:web:25b4821e77c6de7e90dccc",
            measurementId: "G-00FGRRF868"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();

        // ----- Toggle Forms -----
        const container = document.getElementById("container");
        document.getElementById("showSignUp").addEventListener("click", () => {
            container.classList.add("right-panel-active");
        });
        document.getElementById("showSignIn").addEventListener("click", () => {
            container.classList.remove("right-panel-active");
        });

        // ----- Sign Up -----
        document.getElementById("register").addEventListener("click", () => {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    alert("Registration successful! Welcome " + user.email);
                    console.log(user);
                })
                .catch((error) => {
                    console.error(error.message);
                    alert(error.message);
                });
        });

        // ----- Sign In -----
        document.getElementById("login").addEventListener("click", () => {
            const email = document.getElementById("login_email").value;
            const password = document.getElementById("login_password").value;

            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    alert("Login successful! Welcome " + user.email);
                    console.log(user);
                    document.getElementById("logout").style.display = "block";
                })
                .catch((error) => {
                    console.error(error.message);
                    alert(error.message);
                });
        });

        // ----- Logout -----
        document.getElementById("logout").addEventListener("click", () => {
            signOut(auth)
                .then(() => {
                    alert("Logout successful!");
                    document.getElementById("logout").style.display = "none";
                })
                .catch((error) => {
                    console.error(error.message);
                    alert(error.message);
                });
        });

    </script>
</body>
<script src="signIn.js"></script>
</html>
